/*! auction 2015-01-17 */
function queryServers(){servers=database.servers(),setInterval(function a(){return servers.forEach(function(a){query(a.slug,0,function(){database.count(a.slug,function(b,c){logger.log(1,a.name+" has : "+c),database.getSalesOccurence(a.name,function(b,c){console.log("The most present item for "+a.name+" is : "),console.log(c[0])})})})}),a}(),18e5)}function ready(a){return a?void console.log(a):void database.containItem(18803,function(a,b){console.log(b)})}function query(a,b,c){wowApi.query(a,function(d,e){!d&&e&&e.results&&e.results.realm?(logger.log(0,e.results.realm),logger.log(0,e.results.auctions.auctions.length),database.insertDump(e.results.auctions.auctions,e.timestamp,function(a,b){logger.log(1,"Dump was inserted"),c(a,b)})):(console.log("An error occured "+d),maxTry>b?query(a,b+1,c):logger.log(0,"Gave up trying to get data for : "+a))})}var DATA=require("./lib/database"),servers=[],database=new DATA(ready),API=require("./lib/wow-api"),wowApi=new API,logger=require("./logger"),maxTry=10,WOWDB=require("./lib/wow-db"),wowDB=new WOWDB(database,wowApi);